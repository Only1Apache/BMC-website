<!doctype html>
<html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BMC – Bettah Meta Community</title>
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#0b1020;color:#e5e7eb;margin:0} .container{max-width:900px;margin:0 auto;padding:24px} .muted{color:#94a3b8} .list{display:grid;gap:10px} .post-card{background:rgba(2,6,23,.5);border:1px solid rgba(148,163,184,.2);border-radius:14px;padding:14px} .post-meta{font-size:12px;color:#9aa4b2;margin-bottom:6px}</style>
</head><body>
<div class="container">
  <h1>BMC — Temp Members Feed Test</h1>
  <p class="muted">This page is only for testing that functions + redirects work. You can delete after confirming.</p>
  <div id="posts"></div>
  <pre id="err" class="muted"></pre>
  <p class="muted">Try opening <code>/.netlify/functions/get-posts</code> in a new tab too.</p>
</div>
<script>
(async () => {
  const postsDiv = document.getElementById('posts'), err = document.getElementById('err');
  try{
    const r = await fetch('/.netlify/functions/get-posts', { headers:{'cache-control':'no-cache'} });
    if(!r.ok){ throw new Error('HTTP '+r.status); }
    const j = await r.json();
    if(!j.items || !j.items.length){ postsDiv.innerHTML = '<p class="muted">No posts yet (function returned empty list).</p>'; return; }
    postsDiv.innerHTML = j.items.map(p => '<div class="post-card"><div class="post-meta">'+(p.author||'Member')+' • '+new Date(p.created_at).toLocaleString()+'</div><h4>'+ (p.title||'(untitled)') +'</h4><div class="muted">'+ (p.content||'') +'</div></div>').join('');
  }catch(e){
    err.textContent = 'Failed to load JSON from function: '+e.message;
  }
})();
</script>
</body></html>
